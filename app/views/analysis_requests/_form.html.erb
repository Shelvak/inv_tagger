<%= simple_form_for @analysis_request, defaults: { input_html: { required: true } } do |f| %>
  <%= f.error_notification %>
  <% @inputs_class = 'span11' %>

  <div class="form-inputs">
    <div class="row-fluid">
      <div class="span4">
        <%= f.label :enrolle_code, required: true %>
        <%= enrolle_code_input(f) %>
      </div>
      <div class="span4">
        <%= f.label :depostary_enrolle, required: true %>
        <%= depositary_enrolle_code_input(f) %>
      </div>
      <div class="span2">
        <%= request_type_for_analysis_request(f) %>
      </div>
      <div class="span2">
        <%= generated_at_picker(f) %>
      </div>
    </div>

    <div class="row-fluid">
      <div class="span4">
        <%= f.label :product_code, required: true %>
        <%= product_code_input(f) %>
      </div>
      <div class="span2">
        <%= f.input :harvest, input_html: { class: 'span11' } %>
      </div>
      <div class="span2">
        <%= f.input :quantity, as: :string, input_html: { class: 'span9' } %>
      </div>
      <div class="span4">
        <%= f.label :variety_codes %>
        <%= variety_codes_input(f) %>
      </div>
    </div>

    <div class="row-fluid">
      <div class="span6">
        <%= f.label :destiny_code, required: true %>
        <%= destiny_code_input(f) %>
      </div>
      <div class="span2">
        <%= special_analysis_select_for_request(f) %>
      </div>
      <div class="span2">
        <%= tasting_select_for_request(f) %>
      </div>
      <div class="span2">
        <%= f.input :copies, input_html: { class: 'span6' } %>
      </div>
    </div>

    <div class="row-fluid">
      <div class="span12">
        <%= f.input :source_analysis,
          input_html: { rows: 2, class: 'span12', required: false } %>
      </div>
    </div>

    <div id="observations_fields">
      <%= f.label :observations %>

      <% @observations.each do |row| %>
        <%= observations_fields(f, row) %>
      <% end %>
    </div>

    <div class="pull-right">
      <%= link_to 'Otra observaciÃ³n', '#', data: {
        template: observations_fields(f).gsub("\n", ''),
        append_to: '#observations_fields'
      }, class: 'btn btn-success' %>
    </div>
  </div>

  <div class="form-actions">
    <div class="pull-right"><%= yield :form_actions %></div>
    <%= f.button :submit, class: 'btn-primary' %>
  </div>
<% end %>

<script type="text/javascript" charset="utf-8">
  Autocomplete.tokenizeInputs()
</script>
